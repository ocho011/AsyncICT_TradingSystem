# 프로젝트 향후 개발 방향 제안

**날짜:** 2025-08-31

**작성자:** Gemini

**문서 구분:** 제안

## 개요

현재까지 완료된 Phase 4 구현 내용을 바탕으로 코드베이스 전체를 분석하고, 프로젝트의 안정적인 완성 및 향후 발전을 위해 필요한 추가 구현 사항과 개선 사항을 제안합니다.

---

### A. 실행에 필요한 최소한의 구현 사항 (Minimum Viable Requirements)

현재 시스템은 핵심 로직의 '뼈대'는 완성되었으나, 실제 자동매매 시스템으로 작동하기 위해 반드시 필요한 몇 가지 기능이 시뮬레이션으로만 처리되거나 누락되어 있습니다.

**1. 설정 관리 (Configuration Management)**
*   **현황:** API 키, 거래 페어(symbol), 리스크 비율 등 주요 설정값들이 코드 내에 하드코딩되어 있습니다.
*   **문제점:** 설정을 변경할 때마다 코드를 직접 수정해야 하며, API 키와 같은 민감 정보가 코드에 노출됩니다.
*   **제안:**
    *   `config.ini` 또는 `config.yaml` 같은 설정 파일을 분리하여 생성합니다.
    *   API 키, 거래할 심볼 목록, 리스크 설정, 타임프레임 등을 이 파일에서 관리하도록 합니다.
    *   시스템 시작 시 이 설정 파일을 읽어오도록 `AsyncTradingOrchestrator`를 수정합니다.

**2. 실제 데이터 연동 (Real Data Integration)**
*   **현황:** 각 분석 모듈은 실시간 데이터 스트림을 처리하도록 설계되었으나, 실제 바이낸스 웹소켓에 연결하여 데이터를 가져오는 클라이언트 구현이 없습니다.
*   **문제점:** 현재 시스템은 실제 시장 데이터를 수신할 수 없어 분석 모듈이 작동하지 않습니다.
*   **제안:**
    *   `infrastructure/binance/` 디렉토리에 `AsyncBinanceWebSocketClient.py`와 같은 모듈을 새로 생성합니다.
    *   이 클라이언트는 바이낸스 웹소켓에 비동기적으로 연결하고, `kline`, `trade` 등의 실시간 데이터를 수신하는 역할을 합니다.
    *   수신된 데이터는 `EventBus`를 통해 `CandleEvent`나 `TradeEvent` 같은 형태로 시스템 전체에 발행되어야 합니다.
    *   각 분석 모듈(`AsyncFVGDetector` 등)은 이 이벤트를 구독하여 분석을 수행하도록 수정합니다.

**3. 실제 주문 실행 (Real Order Execution)**
*   **현황:** `AsyncOrderManager`의 주문 실행 로직은 `asyncio.sleep()`을 사용한 시뮬레이션입니다.
*   **문제점:** 실제 매매를 수행할 수 없습니다.
*   **제안:**
    *   `infrastructure/binance/`에 바이낸스의 REST API와 통신하는 `AsyncBinanceRestClient.py`를 구현합니다.
    *   `AsyncOrderManager`는 `ApprovedTradeOrder` 이벤트를 받았을 때, 이 REST 클라이언트를 사용하여 실제 `new_order` API를 호출하도록 수정합니다.
    *   주문 상태 추적(`_track_open_orders`) 로직 또한 실제 API를 통해 주문 상태를 조회하도록 구현해야 합니다.

**4. `main.py` 시작점 구현 (Entry Point)**
*   **현황:** `main.py` 파일은 존재하지만, `AsyncTradingOrchestrator`를 초기화하고 실행하는 코드가 없습니다.
*   **문제점:** 현재 상태로는 프로젝트를 실행할 방법이 없습니다.
*   **제안:**
    *   `main.py`에 `asyncio.run()`을 사용하여 `AsyncTradingOrchestrator`의 인스턴스를 생성하고, `start_trading_system()` 메서드를 호출하는 코드를 추가합니다.
    *   시스템 종료 신호(예: `Ctrl+C`)를 받았을 때 `orchestrator.shutdown()`을 호출하여 우아하게 종료하는 로직도 포함합니다.

**5. 로깅 설정 구체화 (Logging Configuration)**
*   **현황:** `logging.basicConfig`를 사용한 기본 로깅만 설정되어 있습니다.
*   **문제점:** 실제 운영 시 로그가 콘솔에만 출력되어 기록이 남지 않고, 로그 레벨 관리가 어렵습니다.
*   **제안:**
    *   로그를 파일로 저장하고, 일정 크기/시간마다 파일을 교체(Rotating)하는 핸들러를 추가합니다.
    *   설정 파일(`config.ini`)에서 로그 레벨(INFO, DEBUG, ERROR)을 조정할 수 있도록 구현합니다.

---

### B. 구현되면 유리한 추가 개선 사항 (Advantageous Enhancements)

아래 사항들은 최소 기능 구현에는 필수는 아니지만, 시스템의 안정성, 확장성, 사용성을 크게 향상시키는 중요한 개선 사항들입니다.

**1. 데이터베이스 연동 (Database Integration)**
*   **필요성:** 거래 내역, 감지된 주요 시그널(오더블록, FVG 등), 계좌 잔고 변화 등을 영구적으로 기록하여 성과를 분석하고 전략을 개선하는 데 필수적입니다.
*   **제안:**
    *   `SQLite` (간단한 시작) 또는 `PostgreSQL` (확장성) 같은 데이터베이스를 도입합니다.
    *   `infrastructure/data/` 디렉토리에 `TradeRepository`, `SignalRepository` 등 데이터베이스와 상호작용하는 리포지토리 클래스를 구현합니다.
    *   주문 체결, 시그널 발생 시 해당 내역을 DB에 비동기적으로 저장하도록 관련 컴포넌트를 수정합니다.

**2. 단위 및 통합 테스트 (Unit & Integration Testing)**
*   **필요성:** 금융 시스템의 특성상 코드의 정확성과 안정성은 매우 중요합니다. 각 기능이 예상대로 동작하는지 검증하는 자동화된 테스트가 반드시 필요합니다.
*   **제안:**
    *   프로젝트 루트에 `tests/` 디렉토리를 생성합니다.
    *   `pytest`와 `pytest-asyncio`를 사용하여 각 모듈(특히 분석, 리스크 관리 로직)에 대한 단위 테스트를 작성합니다.
    *   실제 API 연동 부분은 모의(Mock) 객체를 사용하여 테스트 환경을 구축합니다.

**3. 상태 관리 및 시각화 (State Management & Visualization)**
*   **필요성:** 시스템이 현재 어떤 상태인지, 어떤 포지션을 보유하고 있는지, 계좌 잔고는 얼마인지 등을 실시간으로 파악할 방법이 필요합니다.
*   **제안:**
    *   `interfaces/dashboard/` 디렉토리에 `Dash`나 `Streamlit` 같은 라이브러리를 사용하여 간단한 웹 대시보드를 구현합니다.
    *   대시보드에는 현재 잔고, PnL, 보유 포지션, 최근 이벤트 로그 등을 표시합니다.

**4. 백테스팅 시스템 (Backtesting System)**
*   **필요성:** 새로운 전략이나 파라미터 변경이 수익성이 있는지 확인하기 위해 과거 데이터로 시뮬레이션하는 기능은 자동매매 시스템의 핵심입니다.
*   **제안:**
    *   시스템이 '라이브 모드'와 '백테스트 모드'로 실행될 수 있도록 `AsyncTradingOrchestrator`를 수정합니다.
    *   백테스트 모드에서는 웹소켓 대신 DB나 파일에서 과거 데이터를 순차적으로 읽어와 `EventBus`로 주입하는 '데이터 피더(Data Feeder)'를 구현합니다.
